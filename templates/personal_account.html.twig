{% extends "base.html.twig" %}
{#{% block title %}Mind-maps profile{% endblock %}#}
{% block title %}Mind-maps profile{% endblock %}
{% block head %}
    <link rel="shortcut icon" href="{{ asset('favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="css/button.css">
    <link rel="stylesheet" href="css/personal.css">
    <link rel="stylesheet" href="css/modal.css">
{% endblock %}
{% block content %}
    <div class="personal_account_field">
        <div class="user_information">
            <div class="username_block">
                <h1 class="username">{{ username }}</h1>
            </div>
            <div class="header_title">
                <h1 class="title_name">mind-maps</h1>
            </div>
            <div class="logout_button">
                <a class="style_button right" href="{{ logout_path('main') }}">Logout</a>
            </div>
        </div>
        <div class="mind_maps_info">
            <div class="create_new_mind_map">
                <div class="create_button">
                    <a class="style_button" href="/create_mind_map">Create a new mind map</a>
                </div>
                <div class="load_button">
                    <button id="openLoad" class="style_button" title="load">load</button>
                </div>
            </div>
            <div class="existing_mind_maps">
                {% if mindMapNames|length == 0 %}
                    <p class="message">You don't have mind maps, create it now.</p>
                {% endif %}
                {% for name in mindMapNames %}
                    <div class="mind_map_file_container">
                        <div class="mind_map_file">
                            <div class="mind_map_icon_block">
                                <img class="mind_map_icon" src="images/mind_map_icon.png">
                                <div class="root_name_block">
                                    <p class="root_name">{{ mindMapRootNames[loop.index0] }}</p>
                                </div>
                                <div class="mind_map_download_icon">
                                    <img class="mind_map_icon" src="images/download_arrow.png">
                                </div>
                                <button class="delete_file modal_close"></button>
                            </div>
                            <div class="mind_map_info">
                                <div class="mind_map_name_block">
                                    <a class="mind_map_name"
                                       title={{ name }} href={{ "/mind_map/" ~ name }}>{{ name|e }}</a>
                                </div>
                            </div>
                            <div class="clear"></div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
    <div id="modalLoad" class="modal">
        <div class="modal_dialog">
            <div id="modalLoadFile" class="modal_content">
                <button id="closeLoad" class="modal_close"></button>
                <h1 class="modal_title">Load the file</h1>
                <div class="choose_file">
                    <input type="file" id="files" name="files[]" accept=".json"/>
                    <output id="list"></output>
                </div>
                <p id="nameExist" class="error_name_block">Name has already existed.</p>
                <p id="emptyInput" class="error_name_block">Please, enter a name.</p>
                <div class="input_save_block">
                    <input placeholder="Enter the name of the file" id="input_save" class="input_save" type="text">
                </div>
                <div class="button_modal_load">
                    <button id="loadButton" class="style_button" title="download">load</button>
                </div>
            </div>
        </div>
    </div>
    <script src="/js/vendor/jQuery.js"></script>
    <script src="/js/vendor/file-saver.js"></script>
    <script src="/js/mind-map-creator/utilites/tree.js"></script>
    <script src="/js/mind-map-creator/utilites/node.js"></script>
    <script src="/js/mind-map-creator/settings/global-config.js"></script>
    <script src="/js/mind-map-creator/utilites/tree-saver.js"></script>
    <script src="/js/mind-map-creator/utilites/tree-loader.js"></script>
    <script src="/js/modal/modal.js"></script>
    <script src="/js/modal/load-modal.js"></script>
    <script src="/js/api/controllers/download-controller.js"></script>
    <script src="/js/api/settings/api-config.js"></script>
    <script src="/js/api/mind-map-api.js"></script>
    <script src="/js/api/controllers/delete-mind-map-controller.js"></script>
    <script src="/js/personal/main.js"></script>
{% endblock %}
{% block footer %}{% endblock %}